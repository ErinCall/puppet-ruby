# Put ruby-build on PATH
set -gx PATH <%= scope.lookupvar("::ruby::build::prefix") %>/bin $PATH

# Allow bundler to use all the cores for parallel installation
set -gx BUNDLE_JOBS=<%= scope.lookupvar("::processorcount") %>

<%- if scope.lookupvar("::ruby::provider") == "rbenv" -%>
# Configure RBENV_ROOT and put RBENV_ROOT/bin on PATH
set -gx RBENV_ROOT <%= scope.lookupvar("::ruby::rbenv::prefix") %>
set -gx PATH $RBENV_ROOT/bin $PATH

# Load rbenv
eval (rbenv init -)

# Helper for shell prompts and the like
current_ruby() {
  echo (rbenv version-name)
}
<%- end -%>

# ruby.sh has chruby here but it's not supported for Fish!
